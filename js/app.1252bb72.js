(function(t){function e(e){for(var s,i,n=e[0],c=e[1],l=e[2],u=0,p=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(s=!1)}s&&(o.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},r={app:0},o=[];function i(t){return n.p+"js/"+({about:"about"}[t]||t)+"."+{about:"3b0b2ce7"}[t]+".js"}function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(t){var e=[],a=r[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=r[t]=[e,s]}));e.push(a[2]=s);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.src=i(t);var l=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=r[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",l.name="ChunkLoadError",l.type=s,l.request=o,a[1](l)}r[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"20ab":function(t,e,a){},"33c9":function(t,e,a){"use strict";var s=a("bff0"),r=a.n(s);r.a},"4a2f":function(t,e,a){"use strict";var s=a("b1d9"),r=a.n(s);r.a},"519a":function(t,e,a){"use strict";var s=a("f011"),r=a.n(s);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=a("bc3a"),o=a.n(r),i=a("a7fe"),n=a.n(i),c=a("9062"),l=a.n(c),u=(a("e40d"),a("5f5b")),d=(a("f9e3"),a("2dd8"),a("78a7"),a("f825")),p=a.n(d),m=(a("f8ce"),a("7bb1")),v=a("427f"),f=a.n(v),h=a("a925"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},_=[],b={name:"App"},C=b,x=(a("5c0b"),a("2877")),y=Object(x["a"])(C,g,_,!1,null,null,null),P=y.exports,w=(a("d3b7"),a("8c4f")),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.signin(e)}}},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Please sign in")]),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._m(0),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("Sign in")]),a("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("© 2017-2018")])])])},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox mb-3"},[a("label",[a("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" Remember me ")])])}],O={name:"HelloWorld",data:function(){return{user:{username:"",password:""}}},methods:{signin:function(){var t="".concat("https://vue-course-api.hexschool.io","/admin/signin"),e=this;this.$http.post(t,e.user).then((function(t){console.log(t.data),t.data.success&&e.$router.push("/admin/products")}))}}},j=O,E=(a("cf7e"),Object(x["a"])(j,k,$,!1,null,"2ab11b7a",null)),L=E.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("navbar"),a("alert"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("sidebar"),a("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4",attrs:{role:"main"}},[a("router-view")],1)],1)])],1)},M=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[a("div",{staticClass:"sidebar-sticky"},[t._m(0),a("ul",{staticClass:"nav flex-column mb-2"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[a("i",{staticClass:"fas fa-box-open"}),t._v(" 產品列表 ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/order-list"}},[a("i",{staticClass:"far fa-list-alt"}),t._v(" 訂單列表 ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[a("i",{staticClass:"fas fa-money-bill-alt"}),t._v(" 優惠券 ")])],1)]),t._m(1),a("ul",{staticClass:"nav flex-column mb-2"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/customer_orders"}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" 模擬訂單 ")])],1)])])])])},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[a("span",[t._v("管理員")]),a("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[a("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[a("span",[t._v("模擬功能")]),a("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[a("span",{attrs:{"data-feather":"plus-circle"}})])])}],N=(a("519a"),{}),S=Object(x["a"])(N,q,B,!1,null,null,null),T=S.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},[a("a",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0",attrs:{href:"#"}},[t._v("Company name")]),a("input",{staticClass:"form-control form-control-dark w-100",attrs:{type:"text",placeholder:"Search","aria-label":"Search"}}),a("ul",{staticClass:"navbar-nav px-3"},[a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signout(e)}}},[t._v("Sign out")])])])])])},D=[],A={name:"navbar",methods:{signout:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/logout");this.$http.post(e).then((function(e){e.data.success&&t.$router.push("/signin")}))}}},W=A,z=Object(x["a"])(W,U,D,!1,null,null,null),F=z.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v(" "+t._s(e.message)+" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)},R=[],H=(a("4160"),a("a434"),a("159b"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,s){a.timestamp===t&&e.messages.splice(s,1)}))}),5e3)}},created:function(){var t=this;t.$bus.$on("message:push",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)}))}}),G=H,K=(a("4a2f"),Object(x["a"])(G,J,R,!1,null,null,null)),Q=K.exports,V={components:{sidebar:T,navbar:F,alert:Q}},X=V,Y=Object(x["a"])(X,I,M,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"btnBox"},[a("i-button",{attrs:{type:"primary"},on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新的產品")]),a("modal",{attrs:{width:"800",title:"新增產品"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("div",{staticClass:"productCon"},[a("div",{staticClass:"imgBox"},[a("div",{staticClass:"itemBox"},[a("span",{staticClass:"txt_title"},[t._v("輸入圖片網址")]),a("Input",{attrs:{placeholder:"請輸入圖片連結"},model:{value:t.tempProduct.imageUrl,callback:function(e){t.$set(t.tempProduct,"imageUrl",e)},expression:"tempProduct.imageUrl"}})],1),a("div",{staticClass:"itemBox"},[a("span",{staticClass:"txt_title"},[t._v("或上傳圖片 "),t.status.fileUploading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),a("form",{attrs:{action:"/api/thisismycourse2/admin/upload",enctype:"multipart/form-data",method:"post"}},[a("input",{ref:"files",attrs:{type:"file",name:"file-to-upload"},on:{change:t.uploadFile}})])]),a("div",{staticClass:"itemBox"},[a("div",{staticClass:"img"},[a("img",{staticClass:"img-fluid",attrs:{img:"https://www.malldj.com/productimages/product/500/pbb15080200148.jpg",src:t.tempProduct.imageUrl}})])])]),a("div",{staticClass:"txtBox"},[a("div",{staticClass:"itemBox"},[a("span",{staticClass:"txt_title"},[t._v("標題")]),a("Input",{attrs:{placeholder:"請輸入標題"},model:{value:t.tempProduct.title,callback:function(e){t.$set(t.tempProduct,"title",e)},expression:"tempProduct.title"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"itemBox w50"},[a("span",{staticClass:"txt_title"},[t._v("分類")]),a("Input",{attrs:{placeholder:"請輸入分類"},model:{value:t.tempProduct.category,callback:function(e){t.$set(t.tempProduct,"category",e)},expression:"tempProduct.category"}})],1),a("div",{staticClass:"itemBox w50 mr0"},[a("span",{staticClass:"txt_title"},[t._v("單位")]),a("Input",{attrs:{placeholder:"請輸入單位"},model:{value:t.tempProduct.unit,callback:function(e){t.$set(t.tempProduct,"unit",e)},expression:"tempProduct.unit"}})],1)]),a("div",{staticClass:"item"},[a("div",{staticClass:"itemBox w50"},[a("span",{staticClass:"txt_title"},[t._v("原價")]),a("Input",{attrs:{placeholder:"請輸入原價"},model:{value:t.tempProduct.origin_price,callback:function(e){t.$set(t.tempProduct,"origin_price",e)},expression:"tempProduct.origin_price"}})],1),a("div",{staticClass:"itemBox w50 mr0"},[a("span",{staticClass:"txt_title"},[t._v("售價")]),a("Input",{attrs:{placeholder:"請輸入售價"},model:{value:t.tempProduct.price,callback:function(e){t.$set(t.tempProduct,"price",e)},expression:"tempProduct.price"}})],1)]),a("Divider"),a("div",{staticClass:"itemBox"},[a("span",{staticClass:"txt_title"},[t._v("產品描述")]),a("Input",{attrs:{maxlength:"50","show-word-limit":"",type:"textarea",placeholder:"請輸入產品描述"},model:{value:t.tempProduct.description,callback:function(e){t.$set(t.tempProduct,"description",e)},expression:"tempProduct.description"}})],1),a("div",{staticClass:"itemBox"},[a("span",{staticClass:"txt_title"},[t._v("說明內容")]),a("Input",{attrs:{maxlength:"50","show-word-limit":"",type:"textarea",placeholder:"請輸入產品說明內容"},model:{value:t.tempProduct.content,callback:function(e){t.$set(t.tempProduct,"content",e)},expression:"tempProduct.content"}})],1),a("div",{staticClass:"itemBox"},[a("Checkbox",{attrs:{"true-value":1,"false-value":0,id:"is_enabled"},model:{value:t.tempProduct.is_enabled,callback:function(e){t.$set(t.tempProduct,"is_enabled",e)},expression:"tempProduct.is_enabled"}},[t._v("是否啟用")])],1)],1)])])],1),a("Table",{attrs:{columns:t.products,data:t.data1}}),a("div",{staticClass:"pageBox"},[a("div",[a("Page",{attrs:{total:t.totalPages},on:{"on-change":t.getProducts}})],1)])],1)},et=[],at=(a("a4d3"),a("99af"),a("e439"),a("dbb4"),a("b64b"),a("ade3"));function st(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function rt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?st(Object(a),!0).forEach((function(e){Object(at["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ot={data:function(){var t=this;this.$createElement;return{modal1:!1,data1:[],tempProduct:{},isLoading:!1,pagination:{},status:{fileUploading:!1},products:[{title:"分類",key:"category",width:80},{title:"商品名",key:"title"},{title:"原價",key:"origin_price",width:80,align:"center"},{title:"售價",key:"price",width:80,align:"center"},{title:"是否啟用",key:"is_enabled",width:100,align:"center",render:function(t,e){var a=e.row,s=a.is_enabled;return 1===s?t("div",{class:"enabled_yes"},["已啟用"]):t("div",{class:"enabled_no"},["未啟用"])}},{title:"編輯",key:"",width:200,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"default"},style:{marginRight:"5px"},on:{click:function(){t.openModal(!1,a.row),console.log(a.index)}}},"編輯"),e("Button",{props:{type:"default"},style:{},on:{click:function(){t.removeProduct(a.row)}}},"刪除")])}}]}},methods:{openModal:function(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object.assign({},e),this.isNew=!1),this.modal1=!0},getProducts:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/products?page=").concat(t),a=this;a.isLoading=!0,this.$http.get(e).then((function(t){a.isLoading=!1,a.data1=t.data.products,a.pagination=t.data.pagination}))},ok:function(){this.updatedProduct(),this.$Message.info("成功建立商品")},cancel:function(){this.$Message.info("我取消了")},updatedProduct:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/admin/product"),e="post",a=this;a.isNew||(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/admin/product/").concat(a.tempProduct.id),e="put"),console.log("https://vue-course-api.hexschool.io","evanna"),this.$http[e](t,{data:rt({},this.tempProduct,{image:this.tempProduct.imageUrl})}).then((function(t){console.log(t.data),a.getProducts()}))},removeProduct:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/admin/product/").concat(t.id);this.$http.delete(a).then((function(t){var a=e;a.getProducts()}))},uploadFile:function(){var t=this;console.log(this);var e=this.$refs.files.files[0],a=this,s=new FormData;s.append("file-to-upload",e);var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/admin/upload");a.status.fileUploading=!0,this.$http.post(r,s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data),a.status.fileUploading=!1,e.data.success?a.$set(a.tempProduct,"imageUrl",e.data.imageUrl):t.$bus.$emit("message:push",e.data.message,"danger")}))}},computed:{totalPages:function(){var t=this,e=t.products.length*t.pagination.total_pages;return e}},created:function(){this.getProducts()}},it=ot,nt=(a("8622"),Object(x["a"])(it,tt,et,!1,null,"33274da4",null)),ct=nt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h5",[t._v("訂單列表")]),a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.orderList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"align-middle"}),a("td",{staticClass:"align-middle text-left"},[t._v(t._s(e.user.email))]),a("td",{staticClass:"align-middle text-left"},t._l(e.products,(function(e,s){return a("span",{key:s},[t._v(" "+t._s(e.product.title)+" "),a("br")])})),0),a("td",{staticClass:"align-middle"},[t._v(t._s(e.total))]),a("td",{staticClass:"align-middle"},[a("span",{class:!0===e.is_paid?"txt_green":"txt_gray"},[t._v(" "+t._s(!0===e.is_paid?"已付款":"未付款"))])])])})),0)])])])])},ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{width:"100px"}},[t._v("購買時間")]),a("th",[t._v("Email")]),a("th",[t._v("購買項目")]),a("th",{attrs:{width:"100px"}},[t._v("應付金額")]),a("th",{attrs:{width:"100px"}},[t._v("是否付款")])])}],dt={data:function(){return{orderList:[],is_paid:!0}},methods:{getOrderList:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/orders?page=").concat(t);e.isLoading=!0,this.$http.get(a).then((function(t){e.orderList=t.data.orders,console.log(t),e.isLoading=!1}))}},created:function(){this.getOrderList()}},pt=dt,mt=(a("33c9"),Object(x["a"])(pt,lt,ut,!1,null,"c1b65f5c",null)),vt=mt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row mt-4"},t._l(t.products,(function(e,s){return a("div",{key:s,staticClass:"col-md-3 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm"},[a("div",{staticStyle:{height:"290px","background-size":"100%","background-position":"top"},style:{backgroundImage:"url("+t.img(e)+")"}}),a("div",{staticClass:"card-body"},[a("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))]),a("h5",{staticClass:"card-title"},[a("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(e.title))])]),a("p",{staticClass:"card-text"},[t._v(t._s(e.content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e.price?t._e():a("div",{staticClass:"h5"},[t._v("$ "+t._s(e.origin_price))]),e.price?a("del",{staticClass:"h6"},[t._v("原價 "+t._s(e.origin_price))]):t._e(),e.price?a("div",{staticClass:"h5"},[t._v("$ "+t._s(e.price))]):t._e()])]),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.getProduct(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){return t.addtoCart(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])])})),0),a("div",{staticClass:"cartBox"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.cart.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" ")]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.cart.total))])]),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),a("td",{staticClass:"text-right text-success"},[t._v(t._s(t.cart.final_total))])]):t._e()])]),a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v(" 套用優惠碼 ")])])])]),a("Modal",{attrs:{title:t.modalProduct.title},model:{value:t.isModalProduct,callback:function(e){t.isModalProduct=e},expression:"isModalProduct"}},[a("div",[a("div",{staticClass:"card border-0 shadow-sm"},[a("div",{staticStyle:{height:"480px","background-size":"100%","background-position":"top"},style:{backgroundImage:"url("+t.img(t.modalProduct)+")"}}),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[t._v(t._s(t.modalProduct.content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.modalProduct.price?t._e():a("div",{staticClass:"h5"},[t._v("$ "+t._s(t.modalProduct.origin_price))]),t.modalProduct.price?a("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.modalProduct.origin_price))]):t._e(),t.modalProduct.price?a("div",{staticClass:"h5"},[t._v("特價 "+t._s(t.modalProduct.price))]):t._e()])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"form-control",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.num=e.target.multiple?a:a[0]}}},t._l(10,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" 選購"+t._s(e)+" "+t._s(t.modalProduct.unit)+" ")])})),0),a("div",{staticClass:"d-flex mt-3 mb-3"},[a("button",{staticClass:"btn btn-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(t.modalProduct.id,t.num)}}},[t._v(" 加到購物車 ")])])])]),a("div",{attrs:{slot:"footer"},slot:"footer"})]),a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("email"))+" ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v("請輸入電話")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("請輸入地址")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(1)])])],1)},ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th"),a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("送出訂單")])])}],gt={data:function(){return{num:1,isModalProduct:!1,modalProduct:{},cart:{carts:[]},products:[],status:{loadingItem:""},isLoading:!1,coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/products");t.isLoading=!0,this.$http.get(e).then((function(e){t.products=e.data.products,t.isLoading=!1}))},getProduct:function(t){var e=this;e.status.loadingItem=t,this.isModalProduct=!0,this.setProduct(t)},setProduct:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/product/").concat(t);this.$http.get(a).then((function(t){e.status.loadingItem="",e.modalProduct=t.data.product}))},addtoCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/cart");a.status.loadingItem=t;var r={product_id:t,qty:e};this.$http.post(s,{data:r}).then((function(t){console.log(t),a.status.loadingItem="",a.getCart(),a.isModalProduct=!1,a.num=1}))},getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/cart");t.isLoading=!0,this.$http.get(e).then((function(e){console.log(e),t.cart=e.data.data,t.isLoading=!1}))},removeCartItem:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/cart/").concat(t);e.isLoading=!0,this.$http.delete(a).then((function(t){console.log(t),e.getCart(),e.isLoading=!1}))},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/coupon"),a={code:t.coupon_code};t.isLoading=!0,this.$http.post(e,{data:a}).then((function(e){console.log(e),t.getCart(),t.isLoading=!1}))},createOrder:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/order"),s=e.form;this.$validator.validate().then((function(r){r?t.$http.post(a,{data:s}).then((function(t){console.log("訂單已建立",t),t.data.success&&e.$router.push("customer_checkout/".concat(t.data.orderId)),e.isLoading=!1})):console.log("請輸入完整資料")}))},img:function(t){return t.image?t.image:t.imageUrl}},created:function(){this.getProducts(),this.getCart()}},_t=gt,bt=(a("d6e1"),Object(x["a"])(_t,ft,ht,!1,null,"36eb04a6",null)),Ct=bt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("結帳頁面")]),a("div",{staticClass:"my-5 row justify-content-center",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("form",{staticClass:"col-md-6"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.order.products,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])]),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"100"}},[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])]):t._e()])])])},yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],Pt={data:function(){return{order:{user:{}},orderId:""}},methods:{getOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/order/").concat(t.orderId);t.isLoading=!0,this.$http.get(e).then((function(e){t.order=e.data.order,console.log(e),t.isLoading=!1}))},payOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("evanna","/pay/").concat(t.orderId);t.isLoading=!0,this.$http.post(e).then((function(e){e.data.success&&t.getOrder(),console.log(e),t.isLoading=!1}))}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder(),console.log(this.orderId)}},wt=Pt,kt=Object(x["a"])(wt,xt,yt,!1,null,null,null),$t=kt.exports;s["default"].use(w["a"]);var Ot=[{path:"*",redirect:"login"},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/login",name:"login",component:L},{path:"/admin",name:"dashboard",component:Z,meta:{requiresAuth:!0},children:[{path:"products",name:"products",component:ct,meta:{requiresAuth:!0}},{path:"order-list",name:"OrderList",component:vt,meta:{requiresAuth:!0}}]},{path:"/",name:"dashboard",component:Z,children:[{path:"customer_orders",name:"CustomerOrders",component:Ct},{path:"customer_checkout/:orderId",name:"CustomerCheckout",component:$t}]}],jt=new w["a"]({routes:Ot}),Et=jt;s["default"].prototype.$bus=new s["default"];a("a9e3"),a("b680"),a("ac1f"),a("5319");var Lt=function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))};s["default"].config.productionTip=!1,s["default"].use(n.a,o.a),s["default"].use(u["a"]),s["default"].use(p.a),s["default"].component("Loading",l.a),s["default"].filter("currency",Lt),s["default"].use(h["a"]);var It=new h["a"]({locale:"zhTW"});s["default"].use(m["a"],{events:"input|blur",i18n:It,dictionary:{zhTW:f.a}}),o.a.defaults.withCredentials=!0,new s["default"]({i18n:It,el:"#app",router:Et,render:function(t){return t(P)}}).$mount("#app"),Et.beforeEach((function(t,e,a){if(console.log("to",t,"from",e,"next",a),t.meta.requiresAuth){var s="".concat("https://vue-course-api.hexschool.io","/api/user/check");o.a.post(s).then((function(t){console.log(t.data),t.data.success?a():a({path:"/login"})}))}else a()}))},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},"78a7":function(t,e,a){},8622:function(t,e,a){"use strict";var s=a("da09"),r=a.n(s);r.a},"9c0c":function(t,e,a){},b1d9:function(t,e,a){},bff0:function(t,e,a){},cf7e:function(t,e,a){"use strict";var s=a("d5cd"),r=a.n(s);r.a},d5cd:function(t,e,a){},d6e1:function(t,e,a){"use strict";var s=a("20ab"),r=a.n(s);r.a},da09:function(t,e,a){},f011:function(t,e,a){}});
//# sourceMappingURL=app.1252bb72.js.map